; ModuleID = 'main'
source_filename = "main"
target datalayout = "e-m:w-p270:32:32-p271:32:32-p272:64:64-i64:64-f80:128-n8:16:32:64-S128"
target triple = "x86_64-pc-windows-msvc"

@.str = private constant [23 x i8] c"Hello from JavaScript!\00"
@.str.1 = private constant [20 x i8] c"Try block executing\00"
@.str.2 = private constant [45 x i8] c"=== JavaScript Compilation Test Complete ===\00"
@.str.3 = private constant [5 x i8] c"Add:\00"
@.str.4 = private constant [10 x i8] c"__arrow_1\00"
@.str.5 = private constant [9 x i8] c"Doubled:\00"
@.str.6 = private constant [5 x i8] c"Nova\00"
@.str.7 = private constant [6 x i8] c"1.4.0\00"
@.str.8 = private constant [1 x i8] zeroinitializer
@.str.9 = private constant [3 x i8] c" v\00"
@.str.10 = private constant [10 x i8] c"Multiply:\00"
@.str.11 = private constant [11 x i8] c"Test error\00"
@.str.12 = private constant [14 x i8] c"Caught error:\00"

declare i32 @printf(ptr, ...)

define i64 @Calculator_constructor() {
entry:
  %0 = call ptr @malloc(i64 8)
  %ptr_to_int = ptrtoint ptr %0 to i64
  ret i64 %ptr_to_int
}

define i64 @Calculator_multiply(i64 %arg0, i64 %arg1, i64 %arg2) {
entry:
  %mul = mul i64 %arg2, %arg1
  ret i64 %mul
}

define i64 @__nova_main() {
entry:
  %array_meta = alloca { [24 x i8], i64, i64, ptr }, align 8
  %array = alloca [5 x i64], align 8
  call void @nova_console_log_string(ptr nonnull @.str)
  call void @nova_console_print_newline()
  call void @nova_console_log_string(ptr nonnull @.str.3)
  %0 = call i64 @__arrow_0(i64 5, i64 3)
  call void @nova_console_print_space()
  call void @nova_console_log_number(i64 %0)
  call void @nova_console_print_newline()
  store i64 1, ptr %array, align 4
  %elem_ptr54 = getelementptr inbounds [5 x i64], ptr %array, i64 0, i64 1
  store i64 2, ptr %elem_ptr54, align 4
  %elem_ptr55 = getelementptr inbounds [5 x i64], ptr %array, i64 0, i64 2
  store i64 3, ptr %elem_ptr55, align 4
  %elem_ptr56 = getelementptr inbounds [5 x i64], ptr %array, i64 0, i64 3
  store i64 4, ptr %elem_ptr56, align 4
  %elem_ptr57 = getelementptr inbounds [5 x i64], ptr %array, i64 0, i64 4
  store i64 5, ptr %elem_ptr57, align 4
  %type_id_ptr = getelementptr inbounds i8, ptr %array_meta, i64 8
  store i32 1, ptr %type_id_ptr, align 4
  %meta_length_ptr = getelementptr inbounds { [24 x i8], i64, i64, ptr }, ptr %array_meta, i64 0, i32 1
  store i64 5, ptr %meta_length_ptr, align 4
  %meta_capacity_ptr = getelementptr inbounds { [24 x i8], i64, i64, ptr }, ptr %array_meta, i64 0, i32 2
  store i64 5, ptr %meta_capacity_ptr, align 4
  %meta_elements_ptr = getelementptr inbounds { [24 x i8], i64, i64, ptr }, ptr %array_meta, i64 0, i32 3
  store ptr %array, ptr %meta_elements_ptr, align 8
  %1 = call ptr @nova_value_array_map(ptr nonnull %array_meta, ptr nonnull @__arrow_1)
  call void @nova_console_log_string(ptr nonnull @.str.5)
  call void @nova_console_print_space()
  call void @nova_console_log_object(ptr %1)
  call void @nova_console_print_newline()
  %str_concat = call ptr @nova_string_concat_cstr(ptr nonnull @.str.8, ptr nonnull @.str.6)
  %str_concat68 = call ptr @nova_string_concat_cstr(ptr %str_concat, ptr nonnull @.str.9)
  %str_concat72 = call ptr @nova_string_concat_cstr(ptr %str_concat68, ptr nonnull @.str.7)
  call void @nova_console_log_string(ptr %str_concat72)
  call void @nova_console_print_newline()
  %2 = call i64 @Calculator_constructor()
  call void @nova_console_log_string(ptr nonnull @.str.10)
  %3 = call i64 @Calculator_multiply(i64 %2, i64 4, i64 5)
  call void @nova_console_print_space()
  call void @nova_console_log_number(i64 %3)
  call void @nova_console_print_newline()
  call void @nova_try_begin()
  call void @nova_console_log_string(ptr nonnull @.str.1)
  call void @nova_console_print_newline()
  call void @nova_throw(i64 ptrtoint (ptr @.str.11 to i64))
  %4 = call i64 @nova_get_exception()
  call void @nova_console_log_string(ptr nonnull @.str.12)
  call void @nova_console_print_space()
  call void @nova_console_log_number(i64 %4)
  call void @nova_console_print_newline()
  call void @nova_console_log_string(ptr nonnull @.str.2)
  call void @nova_console_print_newline()
  ret i64 0
}

define i64 @__arrow_0(i64 %arg0, i64 %arg1) {
entry:
  %add = add i64 %arg1, %arg0
  ret i64 %add
}

define i64 @__arrow_1(i64 %arg0) {
entry:
  %mul = shl i64 %arg0, 1
  ret i64 %mul
}

declare ptr @malloc(i64)

declare void @nova_console_log_string(ptr)

declare i64 @nova_get_exception()

declare void @nova_console_print_newline()

declare void @nova_console_print_space()

declare void @nova_console_log_number(i64)

declare ptr @nova_value_array_map(ptr, ptr)

declare void @nova_console_log_object(ptr)

declare ptr @nova_string_concat_cstr(ptr, ptr)

declare void @nova_try_begin()

declare void @nova_throw(i64)

define i32 @main() {
entry:
  %0 = call i64 @__nova_main()
  ret i32 0
}
